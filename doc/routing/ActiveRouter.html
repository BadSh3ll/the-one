<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Thu May 22 10:33:59 CEST 2025 -->
<title>ActiveRouter</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-05-22">
<meta name="description" content="declaration: package: routing, class: ActiveRouter">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">routing</a></div>
<h1 title="Class ActiveRouter" class="title">Class ActiveRouter</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="MessageRouter.html" title="class in routing">routing.MessageRouter</a>
<div class="inheritance">routing.ActiveRouter</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="DirectDeliveryRouter.html" title="class in routing">DirectDeliveryRouter</a></code>, <code><a href="EpidemicOracleRouter.html" title="class in routing">EpidemicOracleRouter</a></code>, <code><a href="EpidemicRouter.html" title="class in routing">EpidemicRouter</a></code>, <code><a href="FirstContactRouter.html" title="class in routing">FirstContactRouter</a></code>, <code><a href="KeyExchangeRouter.html" title="class in routing">KeyExchangeRouter</a></code>, <code><a href="LifeRouter.html" title="class in routing">LifeRouter</a></code>, <code><a href="MaxPropRouter.html" title="class in routing">MaxPropRouter</a></code>, <code><a href="MaxPropRouterWithEstimation.html" title="class in routing">MaxPropRouterWithEstimation</a></code>, <code><a href="ProphetRouter.html" title="class in routing">ProphetRouter</a></code>, <code><a href="ProphetRouterWithEstimation.html" title="class in routing">ProphetRouterWithEstimation</a></code>, <code><a href="ProphetV2Router.html" title="class in routing">ProphetV2Router</a></code>, <code><a href="SprayAndWaitRouter.html" title="class in routing">SprayAndWaitRouter</a></code>, <code><a href="WaveRouter.html" title="class in routing">WaveRouter</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">ActiveRouter</span>
<span class="extends-implements">extends <a href="MessageRouter.html" title="class in routing">MessageRouter</a></span></div>
<div class="block">Superclass of active routers. Contains convenience methods (e.g.
 <a href="#getNextMessageToRemove(boolean)"><code>getNextMessageToRemove(boolean)</code></a>) and watching of sending connections (see
 <a href="#update()"><code>update()</code></a>).</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#DELETE_DELIVERED_S" class="member-name-link">DELETE_DELIVERED_S</a></code></div>
<div class="col-last even-row-color">
<div class="block">Delete delivered messages -setting id ("deleteDelivered").</div>
</div>
<div class="col-first odd-row-color"><code>protected boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#deleteDelivered" class="member-name-link">deleteDelivered</a></code></div>
<div class="col-last odd-row-color">
<div class="block">should messages that final recipient marks as delivered be deleted
 from message buffer</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#RESPONSE_PREFIX" class="member-name-link">RESPONSE_PREFIX</a></code></div>
<div class="col-last even-row-color">
<div class="block">prefix of all response message IDs</div>
</div>
<div class="col-first odd-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../core/Connection.html" title="class in core">Connection</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#sendingConnections" class="member-name-link">sendingConnections</a></code></div>
<div class="col-last odd-row-color">
<div class="block">connection(s) that are currently used for sending</div>
</div>
<div class="col-first even-row-color"><code>static int</code></div>
<div class="col-second even-row-color"><code><a href="#TTL_CHECK_INTERVAL" class="member-name-link">TTL_CHECK_INTERVAL</a></code></div>
<div class="col-last even-row-color">
<div class="block">how often TTL check (discarding old messages) is performed</div>
</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-routing.MessageRouter">Fields inherited from class&nbsp;routing.<a href="MessageRouter.html" title="class in routing">MessageRouter</a></h3>
<code><a href="MessageRouter.html#B_SIZE_S">B_SIZE_S</a>, <a href="MessageRouter.html#DENIED_LOW_RESOURCES">DENIED_LOW_RESOURCES</a>, <a href="MessageRouter.html#DENIED_NO_SPACE">DENIED_NO_SPACE</a>, <a href="MessageRouter.html#DENIED_OLD">DENIED_OLD</a>, <a href="MessageRouter.html#DENIED_POLICY">DENIED_POLICY</a>, <a href="MessageRouter.html#DENIED_TTL">DENIED_TTL</a>, <a href="MessageRouter.html#DENIED_UNSPECIFIED">DENIED_UNSPECIFIED</a>, <a href="MessageRouter.html#MAX_TTL_VALUE">MAX_TTL_VALUE</a>, <a href="MessageRouter.html#MSG_TTL_S">MSG_TTL_S</a>, <a href="MessageRouter.html#msgTtl">msgTtl</a>, <a href="MessageRouter.html#Q_MODE_FIFO">Q_MODE_FIFO</a>, <a href="MessageRouter.html#Q_MODE_RANDOM">Q_MODE_RANDOM</a>, <a href="MessageRouter.html#RCV_OK">RCV_OK</a>, <a href="MessageRouter.html#SEND_QUEUE_MODE_S">SEND_QUEUE_MODE_S</a>, <a href="MessageRouter.html#STR_Q_MODE_FIFO">STR_Q_MODE_FIFO</a>, <a href="MessageRouter.html#STR_Q_MODE_RANDOM">STR_Q_MODE_RANDOM</a>, <a href="MessageRouter.html#TRY_LATER_BUSY">TRY_LATER_BUSY</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier</div>
<div class="table-header col-second">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>&nbsp;</code></div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(core.Settings)" class="member-name-link">ActiveRouter</a><wbr>(<a href="../core/Settings.html" title="class in core">Settings</a>&nbsp;s)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor.</div>
</div>
<div class="col-first odd-row-color"><code>protected </code></div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(routing.ActiveRouter)" class="member-name-link">ActiveRouter</a><wbr>(<a href="ActiveRouter.html" title="class in routing">ActiveRouter</a>&nbsp;r)</code></div>
<div class="col-last odd-row-color">
<div class="block">Copy constructor.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addToSendingConnections(core.Connection)" class="member-name-link">addToSendingConnections</a><wbr>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds a connections to sending connections which are monitored in
 the update.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#canStartTransfer()" class="member-name-link">canStartTransfer</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Makes rudimentary checks (that we have at least one message and one
 connection) about can this router start transfer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#changedConnection(core.Connection)" class="member-name-link">changedConnection</a><wbr>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called when a connection's state changes.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkReceiving(core.Message,core.DTNHost)" class="member-name-link">checkReceiving</a><wbr>(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
 <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if router "wants" to start receiving message (i.e.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createNewMessage(core.Message)" class="member-name-link">createNewMessage</a><wbr>(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates a new message to the router.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dropExpiredMessages()" class="member-name-link">dropExpiredMessages</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Drops messages whose TTL is less than zero.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../core/Connection.html" title="class in core">Connection</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#exchangeDeliverableMessages()" class="member-name-link">exchangeDeliverableMessages</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Exchanges deliverable (to final recipient) messages between this host
 and all hosts this host is currently connected to.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/Connection.html" title="class in core">Connection</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConnections()" class="member-name-link">getConnections</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a list of connections this host currently has with other hosts.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../util/Tuple.html" title="class in util">Tuple</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>,<wbr><a href="../core/Connection.html" title="class in core">Connection</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMessagesForConnected()" class="member-name-link">getMessagesForConnected</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a list of message-connections tuples of the messages whose
 recipient is some host that we're connected to at the moment.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../core/Message.html" title="class in core">Message</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNextMessageToRemove(boolean)" class="member-name-link">getNextMessageToRemove</a><wbr>(boolean&nbsp;excludeMsgBeingSent)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the oldest (by receive time) message in the message buffer
 (that is not being sent if excludeMsgBeingSent is true).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="util/RoutingInfo.html" title="class in routing.util">RoutingInfo</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRoutingInfo()" class="member-name-link">getRoutingInfo</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns routing information about this router.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasEnergy()" class="member-name-link">hasEnergy</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the node has energy left (i.e., energy modeling is
 enabled OR (is enabled and model has energy left))</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#init(core.DTNHost,java.util.List)" class="member-name-link">init</a><wbr>(<a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;host,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/MessageListener.html" title="interface in core">MessageListener</a>&gt;&nbsp;mListeners)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initializes the router; i.e.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isSending(java.lang.String)" class="member-name-link">isSending</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;msgId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if this router is currently sending a message with
 <CODE>msgId</CODE>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isTransferring()" class="member-name-link">isTransferring</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if this router is transferring something at the moment or
 some transfer has not been finalized.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#makeRoomForMessage(int)" class="member-name-link">makeRoomForMessage</a><wbr>(int&nbsp;size)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Removes messages from the buffer (oldest first) until
 there's enough space for the new message.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#makeRoomForNewMessage(int)" class="member-name-link">makeRoomForNewMessage</a><wbr>(int&nbsp;size)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tries to make room for a new message.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../core/Message.html" title="class in core">Message</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#messageTransferred(java.lang.String,core.DTNHost)" class="member-name-link">messageTransferred</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;id,
 <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method should be called (on the receiving host) after a message
 was successfully transferred.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#receiveMessage(core.Message,core.DTNHost)" class="member-name-link">receiveMessage</a><wbr>(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
 <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Try to start receiving a message from another host.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#requestDeliverableMessages(core.Connection)" class="member-name-link">requestDeliverableMessages</a><wbr>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Requests for deliverable message from this router to be sent trough a
 connection.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shuffleMessages(java.util.List)" class="member-name-link">shuffleMessages</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>&gt;&nbsp;messages)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Shuffles a messages list so the messages are in random order.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startTransfer(core.Message,core.Connection)" class="member-name-link">startTransfer</a><wbr>(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
 <a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tries to start a transfer of message using a connection.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#transferAborted(core.Connection)" class="member-name-link">transferAborted</a><wbr>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Method is called just before a transfer is aborted at <a href="#update()"><code>update()</code></a>
 due connection going down.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#transferDone(core.Connection)" class="member-name-link">transferDone</a><wbr>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Method is called just before a transfer is finalized
 at <a href="#update()"><code>update()</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../core/Message.html" title="class in core">Message</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryAllMessages(core.Connection,java.util.List)" class="member-name-link">tryAllMessages</a><wbr>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>&gt;&nbsp;messages)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Goes trough the messages until the other node accepts one
 for receiving (or doesn't accept any).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../core/Connection.html" title="class in core">Connection</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryAllMessagesToAllConnections()" class="member-name-link">tryAllMessagesToAllConnections</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tries to send all messages that this router is carrying to all
 connections this node has.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../util/Tuple.html" title="class in util">Tuple</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>,<wbr><a href="../core/Connection.html" title="class in core">Connection</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryMessagesForConnected(java.util.List)" class="member-name-link">tryMessagesForConnected</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../util/Tuple.html" title="class in util">Tuple</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>,<wbr><a href="../core/Connection.html" title="class in core">Connection</a>&gt;&gt;&nbsp;tuples)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tries to send messages for the connections that are mentioned
 in the Tuples in the order they are in the list until one of
 the connections starts transferring or all tuples have been tried.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../core/Connection.html" title="class in core">Connection</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryMessagesToConnections(java.util.List,java.util.List)" class="member-name-link">tryMessagesToConnections</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>&gt;&nbsp;messages,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/Connection.html" title="class in core">Connection</a>&gt;&nbsp;connections)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tries to send all given messages to all given connections.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update()" class="member-name-link">update</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks out all sending connections to finalize the ready ones
 and abort those whose connection went down.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-routing.MessageRouter">Methods inherited from class&nbsp;routing.<a href="MessageRouter.html" title="class in routing">MessageRouter</a></h3>
<code><a href="MessageRouter.html#addApplication(core.Application)">addApplication</a>, <a href="MessageRouter.html#addToMessages(core.Message,boolean)">addToMessages</a>, <a href="MessageRouter.html#compareByQueueMode(core.Message,core.Message)">compareByQueueMode</a>, <a href="MessageRouter.html#deleteMessage(java.lang.String,boolean)">deleteMessage</a>, <a href="MessageRouter.html#getApplications(java.lang.String)">getApplications</a>, <a href="MessageRouter.html#getBufferSize()">getBufferSize</a>, <a href="MessageRouter.html#getFreeBufferSize()">getFreeBufferSize</a>, <a href="MessageRouter.html#getHost()">getHost</a>, <a href="MessageRouter.html#getMessage(java.lang.String)">getMessage</a>, <a href="MessageRouter.html#getMessageCollection()">getMessageCollection</a>, <a href="MessageRouter.html#getNrofMessages()">getNrofMessages</a>, <a href="MessageRouter.html#hasMessage(java.lang.String)">hasMessage</a>, <a href="MessageRouter.html#isBlacklistedMessage(java.lang.String)">isBlacklistedMessage</a>, <a href="MessageRouter.html#isDeliveredMessage(core.Message)">isDeliveredMessage</a>, <a href="MessageRouter.html#isIncomingMessage(java.lang.String)">isIncomingMessage</a>, <a href="MessageRouter.html#LogCiphertextReceive(core.Message,core.DTNHost,core.DTNHost)">LogCiphertextReceive</a>, <a href="MessageRouter.html#LogKeyExchangeFailure(core.DTNHost,core.DTNHost)">LogKeyExchangeFailure</a>, <a href="MessageRouter.html#LogKeyExchangeSuccess(core.DTNHost,core.DTNHost)">LogKeyExchangeSuccess</a>, <a href="MessageRouter.html#LogPublicKeyReceive(core.Message,core.DTNHost,core.DTNHost)">LogPublicKeyReceive</a>, <a href="MessageRouter.html#messageAborted(java.lang.String,core.DTNHost,int)">messageAborted</a>, <a href="MessageRouter.html#putToIncomingBuffer(core.Message,core.DTNHost)">putToIncomingBuffer</a>, <a href="MessageRouter.html#removeFromIncomingBuffer(java.lang.String,core.DTNHost)">removeFromIncomingBuffer</a>, <a href="MessageRouter.html#removeFromMessages(java.lang.String)">removeFromMessages</a>, <a href="MessageRouter.html#replicate()">replicate</a>, <a href="MessageRouter.html#sendMessage(java.lang.String,core.DTNHost)">sendMessage</a>, <a href="MessageRouter.html#sortByQueueMode(java.util.List)">sortByQueueMode</a>, <a href="MessageRouter.html#toString()">toString</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="DELETE_DELIVERED_S">
<h3>DELETE_DELIVERED_S</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">DELETE_DELIVERED_S</span></div>
<div class="block">Delete delivered messages -setting id ("deleteDelivered"). Boolean valued.
 If set to true and final recipient of a message rejects it because it
 already has it, the message is deleted from buffer. Default=false.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../constant-values.html#routing.ActiveRouter.DELETE_DELIVERED_S">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteDelivered">
<h3>deleteDelivered</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">deleteDelivered</span></div>
<div class="block">should messages that final recipient marks as delivered be deleted
 from message buffer</div>
</section>
</li>
<li>
<section class="detail" id="RESPONSE_PREFIX">
<h3>RESPONSE_PREFIX</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">RESPONSE_PREFIX</span></div>
<div class="block">prefix of all response message IDs</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../constant-values.html#routing.ActiveRouter.RESPONSE_PREFIX">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="TTL_CHECK_INTERVAL">
<h3>TTL_CHECK_INTERVAL</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">TTL_CHECK_INTERVAL</span></div>
<div class="block">how often TTL check (discarding old messages) is performed</div>
</section>
</li>
<li>
<section class="detail" id="sendingConnections">
<h3>sendingConnections</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../core/Connection.html" title="class in core">Connection</a>&gt;</span>&nbsp;<span class="element-name">sendingConnections</span></div>
<div class="block">connection(s) that are currently used for sending</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(core.Settings)">
<h3>ActiveRouter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ActiveRouter</span><wbr><span class="parameters">(<a href="../core/Settings.html" title="class in core">Settings</a>&nbsp;s)</span></div>
<div class="block">Constructor. Creates a new message router based on the settings in
 the given Settings object.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>s</code> - The settings object</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(routing.ActiveRouter)">
<h3>ActiveRouter</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="element-name">ActiveRouter</span><wbr><span class="parameters">(<a href="ActiveRouter.html" title="class in routing">ActiveRouter</a>&nbsp;r)</span></div>
<div class="block">Copy constructor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>r</code> - The router prototype where setting values are copied from</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="init(core.DTNHost,java.util.List)">
<h3>init</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">init</span><wbr><span class="parameters">(<a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;host,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/MessageListener.html" title="interface in core">MessageListener</a>&gt;&nbsp;mListeners)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="MessageRouter.html#init(core.DTNHost,java.util.List)">MessageRouter</a></code></span></div>
<div class="block">Initializes the router; i.e. sets the host this router is in and
 message listeners that need to be informed about message related
 events etc.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="MessageRouter.html#init(core.DTNHost,java.util.List)">init</a></code>&nbsp;in class&nbsp;<code><a href="MessageRouter.html" title="class in routing">MessageRouter</a></code></dd>
<dt>Parameters:</dt>
<dd><code>host</code> - The host this router is in</dd>
<dd><code>mListeners</code> - The message listeners</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="changedConnection(core.Connection)">
<h3>changedConnection</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">changedConnection</span><wbr><span class="parameters">(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</span></div>
<div class="block">Called when a connection's state changes. If energy modeling is enabled,
 and a new connection is created to this node, reduces the energy for the
 device discovery (scan response) amount</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="MessageRouter.html#changedConnection(core.Connection)">changedConnection</a></code>&nbsp;in class&nbsp;<code><a href="MessageRouter.html" title="class in routing">MessageRouter</a></code></dd>
<dt>Parameters:</dt>
<dd><code>con</code> - The connection whose state changed</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="requestDeliverableMessages(core.Connection)">
<h3>requestDeliverableMessages</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">requestDeliverableMessages</span><wbr><span class="parameters">(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="MessageRouter.html#requestDeliverableMessages(core.Connection)">MessageRouter</a></code></span></div>
<div class="block">Requests for deliverable message from this router to be sent trough a
 connection.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="MessageRouter.html#requestDeliverableMessages(core.Connection)">requestDeliverableMessages</a></code>&nbsp;in class&nbsp;<code><a href="MessageRouter.html" title="class in routing">MessageRouter</a></code></dd>
<dt>Parameters:</dt>
<dd><code>con</code> - The connection to send the messages trough</dd>
<dt>Returns:</dt>
<dd>True if this router started a transfer, false if not</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createNewMessage(core.Message)">
<h3>createNewMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">createNewMessage</span><wbr><span class="parameters">(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="MessageRouter.html#createNewMessage(core.Message)">MessageRouter</a></code></span></div>
<div class="block">Creates a new message to the router.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="MessageRouter.html#createNewMessage(core.Message)">createNewMessage</a></code>&nbsp;in class&nbsp;<code><a href="MessageRouter.html" title="class in routing">MessageRouter</a></code></dd>
<dt>Parameters:</dt>
<dd><code>m</code> - The message to create</dd>
<dt>Returns:</dt>
<dd>True if the creation succeeded, false if not (e.g.
 the message was too big for the buffer)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="receiveMessage(core.Message,core.DTNHost)">
<h3>receiveMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">receiveMessage</span><wbr><span class="parameters">(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
 <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="MessageRouter.html#receiveMessage(core.Message,core.DTNHost)">MessageRouter</a></code></span></div>
<div class="block">Try to start receiving a message from another host.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="MessageRouter.html#receiveMessage(core.Message,core.DTNHost)">receiveMessage</a></code>&nbsp;in class&nbsp;<code><a href="MessageRouter.html" title="class in routing">MessageRouter</a></code></dd>
<dt>Parameters:</dt>
<dd><code>m</code> - Message to put in the receiving buffer</dd>
<dd><code>from</code> - Who the message is from</dd>
<dt>Returns:</dt>
<dd>Value zero if the node accepted the message (RCV_OK), value less
 than zero if node rejected the message (e.g. DENIED_OLD), value bigger
 than zero if the other node should try later (e.g. TRY_LATER_BUSY).</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="messageTransferred(java.lang.String,core.DTNHost)">
<h3>messageTransferred</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../core/Message.html" title="class in core">Message</a></span>&nbsp;<span class="element-name">messageTransferred</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;id,
 <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="MessageRouter.html#messageTransferred(java.lang.String,core.DTNHost)">MessageRouter</a></code></span></div>
<div class="block">This method should be called (on the receiving host) after a message
 was successfully transferred. The transferred message is put to the
 message buffer unless this host is the final recipient of the message.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="MessageRouter.html#messageTransferred(java.lang.String,core.DTNHost)">messageTransferred</a></code>&nbsp;in class&nbsp;<code><a href="MessageRouter.html" title="class in routing">MessageRouter</a></code></dd>
<dt>Parameters:</dt>
<dd><code>id</code> - Id of the transferred message</dd>
<dd><code>from</code> - Host the message was from (previous hop)</dd>
<dt>Returns:</dt>
<dd>The message that this host received</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getConnections()">
<h3>getConnections</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/Connection.html" title="class in core">Connection</a>&gt;</span>&nbsp;<span class="element-name">getConnections</span>()</div>
<div class="block">Returns a list of connections this host currently has with other hosts.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a list of connections this host currently has with other hosts</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startTransfer(core.Message,core.Connection)">
<h3>startTransfer</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">startTransfer</span><wbr><span class="parameters">(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
 <a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</span></div>
<div class="block">Tries to start a transfer of message using a connection. Is starting
 succeeds, the connection is added to the watch list of active connections</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>m</code> - The message to transfer</dd>
<dd><code>con</code> - The connection to use</dd>
<dt>Returns:</dt>
<dd>the value returned by
 <a href="../core/Connection.html#startTransfer(core.DTNHost,core.Message)"><code>Connection.startTransfer(DTNHost, Message)</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="canStartTransfer()">
<h3>canStartTransfer</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">canStartTransfer</span>()</div>
<div class="block">Makes rudimentary checks (that we have at least one message and one
 connection) about can this router start transfer.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>True if router can start transfer, false if not</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkReceiving(core.Message,core.DTNHost)">
<h3>checkReceiving</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">checkReceiving</span><wbr><span class="parameters">(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
 <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</span></div>
<div class="block">Checks if router "wants" to start receiving message (i.e. router
 isn't transferring, doesn't have the message and has room for it).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>m</code> - The message to check</dd>
<dt>Returns:</dt>
<dd>A return code similar to
 <a href="MessageRouter.html#receiveMessage(core.Message,core.DTNHost)"><code>MessageRouter.receiveMessage(Message, DTNHost)</code></a>, i.e.
 <a href="MessageRouter.html#RCV_OK"><code>MessageRouter.RCV_OK</code></a> if receiving seems to be OK,
 TRY_LATER_BUSY if router is transferring, DENIED_OLD if the router
 is already carrying the message or it has been delivered to
 this router (as final recipient), or DENIED_NO_SPACE if the message
 does not fit into buffer</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="makeRoomForMessage(int)">
<h3>makeRoomForMessage</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">makeRoomForMessage</span><wbr><span class="parameters">(int&nbsp;size)</span></div>
<div class="block">Removes messages from the buffer (oldest first) until
 there's enough space for the new message.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>size</code> - Size of the new message
 transferred, the transfer is aborted before message is removed</dd>
<dt>Returns:</dt>
<dd>True if enough space could be freed, false if not</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="dropExpiredMessages()">
<h3>dropExpiredMessages</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dropExpiredMessages</span>()</div>
<div class="block">Drops messages whose TTL is less than zero.</div>
</section>
</li>
<li>
<section class="detail" id="makeRoomForNewMessage(int)">
<h3>makeRoomForNewMessage</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">makeRoomForNewMessage</span><wbr><span class="parameters">(int&nbsp;size)</span></div>
<div class="block">Tries to make room for a new message. Current implementation simply
 calls <a href="#makeRoomForMessage(int)"><code>makeRoomForMessage(int)</code></a> and ignores the return value.
 Therefore, if the message can't fit into buffer, the buffer is only
 cleared from messages that are not being sent.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>size</code> - Size of the new message</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getNextMessageToRemove(boolean)">
<h3>getNextMessageToRemove</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../core/Message.html" title="class in core">Message</a></span>&nbsp;<span class="element-name">getNextMessageToRemove</span><wbr><span class="parameters">(boolean&nbsp;excludeMsgBeingSent)</span></div>
<div class="block">Returns the oldest (by receive time) message in the message buffer
 (that is not being sent if excludeMsgBeingSent is true).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>excludeMsgBeingSent</code> - If true, excludes message(s) that are
 being sent from the oldest message check (i.e. if oldest message is
 being sent, the second oldest message is returned)</dd>
<dt>Returns:</dt>
<dd>The oldest message or null if no message could be returned
 (no messages in buffer or all messages in buffer are being sent and
 exludeMsgBeingSent is true)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMessagesForConnected()">
<h3>getMessagesForConnected</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../util/Tuple.html" title="class in util">Tuple</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>,<wbr><a href="../core/Connection.html" title="class in core">Connection</a>&gt;&gt;</span>&nbsp;<span class="element-name">getMessagesForConnected</span>()</div>
<div class="block">Returns a list of message-connections tuples of the messages whose
 recipient is some host that we're connected to at the moment.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a list of message-connections tuples</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryMessagesForConnected(java.util.List)">
<h3>tryMessagesForConnected</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../util/Tuple.html" title="class in util">Tuple</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>,<wbr><a href="../core/Connection.html" title="class in core">Connection</a>&gt;</span>&nbsp;<span class="element-name">tryMessagesForConnected</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../util/Tuple.html" title="class in util">Tuple</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>,<wbr><a href="../core/Connection.html" title="class in core">Connection</a>&gt;&gt;&nbsp;tuples)</span></div>
<div class="block">Tries to send messages for the connections that are mentioned
 in the Tuples in the order they are in the list until one of
 the connections starts transferring or all tuples have been tried.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>tuples</code> - The tuples to try</dd>
<dt>Returns:</dt>
<dd>The tuple whose connection accepted the message or null if
 none of the connections accepted the message that was meant for them.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryAllMessages(core.Connection,java.util.List)">
<h3>tryAllMessages</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../core/Message.html" title="class in core">Message</a></span>&nbsp;<span class="element-name">tryAllMessages</span><wbr><span class="parameters">(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>&gt;&nbsp;messages)</span></div>
<div class="block">Goes trough the messages until the other node accepts one
 for receiving (or doesn't accept any). If a transfer is started, the
 connection is included in the list of sending connections.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>con</code> - Connection trough which the messages are sent</dd>
<dd><code>messages</code> - A list of messages to try</dd>
<dt>Returns:</dt>
<dd>The message whose transfer was started or null if no
 transfer was started.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryMessagesToConnections(java.util.List,java.util.List)">
<h3>tryMessagesToConnections</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../core/Connection.html" title="class in core">Connection</a></span>&nbsp;<span class="element-name">tryMessagesToConnections</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>&gt;&nbsp;messages,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/Connection.html" title="class in core">Connection</a>&gt;&nbsp;connections)</span></div>
<div class="block">Tries to send all given messages to all given connections. Connections
 are first iterated in the order they are in the list and for every
 connection, the messages are tried in the order they are in the list.
 Once an accepting connection is found, no other connections or messages
 are tried.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>messages</code> - The list of Messages to try</dd>
<dd><code>connections</code> - The list of Connections to try</dd>
<dt>Returns:</dt>
<dd>The connections that started a transfer or null if no connection
 accepted a message.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryAllMessagesToAllConnections()">
<h3>tryAllMessagesToAllConnections</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../core/Connection.html" title="class in core">Connection</a></span>&nbsp;<span class="element-name">tryAllMessagesToAllConnections</span>()</div>
<div class="block">Tries to send all messages that this router is carrying to all
 connections this node has. Messages are ordered using the
 <a href="MessageRouter.html#sortByQueueMode(java.util.List)"><code>MessageRouter.sortByQueueMode(List)</code></a>. See
 <a href="#tryMessagesToConnections(java.util.List,java.util.List)"><code>tryMessagesToConnections(List, List)</code></a> for sending details.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The connections that started a transfer or null if no connection
 accepted a message.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="exchangeDeliverableMessages()">
<h3>exchangeDeliverableMessages</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../core/Connection.html" title="class in core">Connection</a></span>&nbsp;<span class="element-name">exchangeDeliverableMessages</span>()</div>
<div class="block">Exchanges deliverable (to final recipient) messages between this host
 and all hosts this host is currently connected to. First all messages
 from this host are checked and then all other hosts are asked for
 messages to this host. If a transfer is started, the search ends.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>A connection that started a transfer or null if no transfer
 was started</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="shuffleMessages(java.util.List)">
<h3>shuffleMessages</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">shuffleMessages</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>&gt;&nbsp;messages)</span></div>
<div class="block">Shuffles a messages list so the messages are in random order.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>messages</code> - The list to sort and shuffle</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addToSendingConnections(core.Connection)">
<h3>addToSendingConnections</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addToSendingConnections</span><wbr><span class="parameters">(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</span></div>
<div class="block">Adds a connections to sending connections which are monitored in
 the update.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>con</code> - The connection to add</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#update()"><code>update()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isTransferring()">
<h3>isTransferring</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isTransferring</span>()</div>
<div class="block">Returns true if this router is transferring something at the moment or
 some transfer has not been finalized.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if this router is transferring something</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isSending(java.lang.String)">
<h3>isSending</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isSending</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;msgId)</span></div>
<div class="block">Returns true if this router is currently sending a message with
 <CODE>msgId</CODE>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>msgId</code> - The ID of the message</dd>
<dt>Returns:</dt>
<dd>True if the message is being sent false if not</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasEnergy()">
<h3>hasEnergy</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasEnergy</span>()</div>
<div class="block">Returns true if the node has energy left (i.e., energy modeling is
 enabled OR (is enabled and model has energy left))</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>has the node energy</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="update()">
<h3>update</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span>()</div>
<div class="block">Checks out all sending connections to finalize the ready ones
 and abort those whose connection went down. Also drops messages
 whose TTL &lt;= 0 (checking every one simulated minute).</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="MessageRouter.html#update()">update</a></code>&nbsp;in class&nbsp;<code><a href="MessageRouter.html" title="class in routing">MessageRouter</a></code></dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#addToSendingConnections(core.Connection)"><code>addToSendingConnections(Connection)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="transferAborted(core.Connection)">
<h3>transferAborted</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">transferAborted</span><wbr><span class="parameters">(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</span></div>
<div class="block">Method is called just before a transfer is aborted at <a href="#update()"><code>update()</code></a>
 due connection going down. This happens on the sending host.
 Subclasses that are interested of the event may want to override this.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>con</code> - The connection whose transfer was aborted</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="transferDone(core.Connection)">
<h3>transferDone</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">transferDone</span><wbr><span class="parameters">(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</span></div>
<div class="block">Method is called just before a transfer is finalized
 at <a href="#update()"><code>update()</code></a>.
 Subclasses that are interested of the event may want to override this.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>con</code> - The connection whose transfer was finalized</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRoutingInfo()">
<h3>getRoutingInfo</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="util/RoutingInfo.html" title="class in routing.util">RoutingInfo</a></span>&nbsp;<span class="element-name">getRoutingInfo</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="MessageRouter.html#getRoutingInfo()">MessageRouter</a></code></span></div>
<div class="block">Returns routing information about this router.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="MessageRouter.html#getRoutingInfo()">getRoutingInfo</a></code>&nbsp;in class&nbsp;<code><a href="MessageRouter.html" title="class in routing">MessageRouter</a></code></dd>
<dt>Returns:</dt>
<dd>The routing information.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
